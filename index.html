<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Logitext ‚Äî Pico 2 W HID over WiFi</title>
  <style>
    :root {
      --bg: #0d1117;
      --surface: #161b22;
      --border: #30363d;
      --text: #c9d1d9;
      --muted: #8b949e;
      --accent: #58a6ff;
      --accent2: #3fb950;
      --danger: #f85149;
      --warn: #e3b341;
      --debug-bg: #1a1f2e;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { background: var(--bg); color: var(--text); font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', monospace; min-height: 100vh; }

    /* ‚îÄ‚îÄ Debug Menu (Menu 1) ‚îÄ‚îÄ */
    #debug-bar {
      display: none;
      background: var(--debug-bg);
      border-bottom: 2px solid var(--warn);
      padding: 8px 16px;
      font-size: 0.8rem;
    }
    #debug-bar.visible { display: flex; flex-wrap: wrap; gap: 8px; align-items: center; }
    #debug-bar a { color: var(--warn); text-decoration: none; padding: 3px 8px; border: 1px solid var(--warn); border-radius: 4px; }
    #debug-bar a:hover { background: var(--warn); color: #000; }
    #debug-bar .debug-label { color: var(--muted); font-size: 0.7rem; margin-right: 4px; text-transform: uppercase; letter-spacing: 0.05em; }

    /* ‚îÄ‚îÄ Main Nav ‚îÄ‚îÄ */
    nav {
      background: var(--surface);
      border-bottom: 1px solid var(--border);
      padding: 0 24px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 8px;
      min-height: 56px;
    }
    .nav-brand { font-weight: 700; font-size: 1.1rem; color: var(--accent); text-decoration: none; display: flex; align-items: center; gap: 8px; }
    .nav-links { display: flex; flex-wrap: wrap; gap: 4px; align-items: center; }
    .nav-links a { color: var(--text); text-decoration: none; padding: 6px 10px; border-radius: 6px; font-size: 0.9rem; transition: background 0.15s; }
    .nav-links a:hover { background: var(--border); color: var(--accent); }

    /* ‚îÄ‚îÄ Search ‚îÄ‚îÄ */
    .search-wrap { position: relative; }
    #search-input {
      background: var(--bg);
      border: 1px solid var(--border);
      color: var(--text);
      padding: 6px 12px;
      border-radius: 6px;
      font-size: 0.85rem;
      width: 200px;
      outline: none;
    }
    #search-input:focus { border-color: var(--accent); }
    #search-dropdown {
      display: none;
      position: absolute;
      top: calc(100% + 4px);
      left: 0;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 8px;
      min-width: 260px;
      z-index: 999;
      overflow: hidden;
    }
    #search-dropdown.open { display: block; }
    #search-dropdown a {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 9px 14px;
      color: var(--text);
      text-decoration: none;
      font-size: 0.85rem;
      border-bottom: 1px solid var(--border);
    }
    #search-dropdown a:last-child { border-bottom: none; }
    #search-dropdown a:hover, #search-dropdown a.active { background: var(--border); color: var(--accent); }
    #search-dropdown a .icon { font-size: 1rem; }

    /* ‚îÄ‚îÄ Debug Toggle Button ‚îÄ‚îÄ */
    #debug-toggle {
      background: none;
      border: 1px solid var(--warn);
      color: var(--warn);
      padding: 4px 10px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.75rem;
    }
    #debug-toggle:hover { background: var(--warn); color: #000; }

    /* ‚îÄ‚îÄ Hero ‚îÄ‚îÄ */
    .hero {
      text-align: center;
      padding: 60px 24px 40px;
    }
    .hero h1 { font-size: 2.4rem; font-weight: 800; color: var(--accent); margin-bottom: 12px; }
    .hero p { font-size: 1.05rem; color: var(--muted); max-width: 600px; margin: 0 auto 24px; line-height: 1.6; }
    .diagram {
      display: inline-block;
      background: var(--surface);
      border: 1px solid var(--border);
      padding: 16px 32px;
      border-radius: 10px;
      font-family: monospace;
      font-size: 0.95rem;
      color: var(--accent2);
    }

    /* ‚îÄ‚îÄ Stage Cards Grid ‚îÄ‚îÄ */
    .stages {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
      gap: 16px;
      max-width: 1200px;
      margin: 0 auto;
      padding: 32px 24px;
    }
    .card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 20px;
      text-decoration: none;
      color: var(--text);
      transition: border-color 0.2s, transform 0.15s;
      display: block;
    }
    .card:hover { border-color: var(--accent); transform: translateY(-2px); }
    .card .stage-num { font-size: 0.75rem; color: var(--muted); text-transform: uppercase; letter-spacing: 0.06em; margin-bottom: 6px; }
    .card h3 { font-size: 1.05rem; color: var(--accent); margin-bottom: 6px; }
    .card p { font-size: 0.85rem; color: var(--muted); line-height: 1.5; }

    /* ‚îÄ‚îÄ Social Links ‚îÄ‚îÄ */
    .social {
      display: flex;
      justify-content: center;
      gap: 16px;
      padding: 32px 24px;
      flex-wrap: wrap;
    }
    .social a {
      display: flex;
      align-items: center;
      gap: 8px;
      background: var(--surface);
      border: 1px solid var(--border);
      color: var(--text);
      text-decoration: none;
      padding: 10px 18px;
      border-radius: 8px;
      font-size: 0.9rem;
      transition: border-color 0.2s;
    }
    .social a:hover { border-color: var(--accent); color: var(--accent); }

    /* ‚îÄ‚îÄ Footer ‚îÄ‚îÄ */
    footer {
      text-align: center;
      padding: 24px;
      color: var(--muted);
      font-size: 0.8rem;
      border-top: 1px solid var(--border);
    }

    @media (max-width: 600px) {
      .hero h1 { font-size: 1.6rem; }
      #search-input { width: 140px; }
      nav { padding: 8px 12px; }
    }
  </style>
</head>
<body>

<!-- Menu 1: Debug Nav (hidden unless debug mode) -->
<div id="debug-bar">
  <span class="debug-label">üêõ Debug</span>
  <!-- populated from menus.json -->
</div>

<!-- Main Nav -->
<nav>
  <a class="nav-brand" href="index.html">‚å®Ô∏è Logitext</a>

  <!-- Menu 2: Content links -->
  <div class="nav-links" id="content-nav">
    <!-- populated from menus.json -->
  </div>

  <div style="display:flex;gap:8px;align-items:center;">
    <div class="search-wrap">
      <input id="search-input" type="text" placeholder="üîç Search..." autocomplete="off" />
      <div id="search-dropdown"></div>
    </div>
    <button id="debug-toggle" title="Toggle debug menu">üêõ</button>
  </div>
</nav>

<!-- Hero -->
<section class="hero">
  <h1>‚å®Ô∏è Pico 2 W HID over WiFi</h1>
  <p>Send keystrokes from your Mac to a Windows PC using a Raspberry Pi Pico 2 W as a USB HID keyboard ‚Äî no software on Windows required.</p>
  <div class="diagram">Mac ‚îÄ‚îÄWiFi HTTP‚îÄ‚îÄ‚ñ∫ Pico 2 W ‚îÄ‚îÄUSB HID‚îÄ‚îÄ‚ñ∫ Windows PC</div>
</section>

<!-- 7-Stage Cards -->
<section class="stages" id="stage-cards"></section>

<!-- Social Links -->
<div class="social">
  <a href="https://github.com/rifaterdemsahin/raspberry-pico-2-hid" target="_blank">
    <svg width="18" height="18" viewBox="0 0 16 16" fill="currentColor"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/></svg>
    GitHub Repo
  </a>
  <a href="https://linkedin.com/in/rifaterdemsahin" target="_blank">
    <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 01-2.063-2.065 2.064 2.064 0 112.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
    LinkedIn üîó
  </a>
  <a href="https://youtube.com/@RifatErdemSahin" target="_blank">
    <svg width="18" height="18" viewBox="0 0 24 24" fill="#ff0000"><path d="M23.495 6.205a3.007 3.007 0 00-2.088-2.088c-1.87-.501-9.396-.501-9.396-.501s-7.507-.01-9.396.501A3.007 3.007 0 00.527 6.205a31.247 31.247 0 00-.522 5.805 31.247 31.247 0 00.522 5.783 3.007 3.007 0 002.088 2.088c1.868.502 9.396.502 9.396.502s7.506 0 9.396-.502a3.007 3.007 0 002.088-2.088 31.247 31.247 0 00.5-5.783 31.247 31.247 0 00-.5-5.805zM9.609 15.601V8.408l6.264 3.602z"/></svg>
    YouTube üì∫
  </a>
</div>

<footer>
  ¬© 2026 Logitext ‚Äî Raspberry Pi Pico 2 W HID Project ¬∑ Built with the 7-Stage Self-Learning Framework
</footer>

<script>
const STAGE_CARDS = [
  { num: 'Stage 1', icon: 'üîç', title: 'Real Unknown', sub: 'The Why', desc: 'Problem definition, OKRs, and the core questions we are solving.', url: '1_Real_Unknown/index.html' },
  { num: 'Stage 2', icon: 'üåç', title: 'Environment', sub: 'The Context', desc: 'Roadmaps, hardware constraints, and setup guides for Mac, Windows, and Pico.', url: '2_Environment/index.html' },
  { num: 'Stage 3', icon: 'üé®', title: 'Simulation', sub: 'The Vision', desc: 'UI mockups and an image carousel showing the physical setup.', url: '3_Simulation/index.html' },
  { num: 'Stage 4', icon: 'üìê', title: 'Formula', sub: 'The Recipe', desc: 'Step-by-step guides: flashing firmware, WiFi config, HID setup.', url: '4_Formula/index.html' },
  { num: 'Stage 5', icon: 'üíª', title: 'Symbols', sub: 'The Reality', desc: 'Core source code ‚Äî code.py, send_wifi.py, and supporting scripts.', url: '5_Symbols/index.html' },
  { num: 'Stage 6', icon: 'üêõ', title: 'Semblance', sub: 'The Scars', desc: 'Error logs, near-misses, workarounds, and the gap between plan and reality.', url: '6_Semblance/index.html' },
  { num: 'Stage 7', icon: 'üß™', title: 'Testing Known', sub: 'The Proof', desc: 'Validation against objectives, testing checklists, and outcome confirmation.', url: '7_Testing_Known/index.html' },
];

// All searchable items (debug + content + stages) loaded from menus.json
let ALL_ITEMS = [];

async function loadMenus() {
  try {
    const res = await fetch('menus.json');
    const data = await res.json();
    buildDebugBar(data.debug_menu);
    buildContentNav(data.content_menu);
    ALL_ITEMS = [
      ...STAGE_CARDS.map(c => ({ label: c.title, icon: c.icon, url: c.url })),
      ...data.debug_menu,
      ...data.content_menu,
    ];
    initSearch();
  } catch (e) {
    console.warn('Could not load menus.json', e);
  }
}

function buildDebugBar(items) {
  const bar = document.getElementById('debug-bar');
  items.forEach(item => {
    const a = document.createElement('a');
    a.href = item.url;
    a.textContent = item.icon + ' ' + item.label;
    bar.appendChild(a);
  });
  // Add markdown renderer link
  const md = document.createElement('a');
  md.href = 'markdown_renderer.html';
  md.textContent = 'üìù MD Renderer';
  bar.appendChild(md);
}

function buildContentNav(items) {
  const nav = document.getElementById('content-nav');
  items.forEach(item => {
    const a = document.createElement('a');
    // Content menu items open markdown via renderer if .md file
    if (item.url.endsWith('.md')) {
      a.href = 'markdown_renderer.html?file=' + encodeURIComponent(item.url);
    } else {
      a.href = item.url;
    }
    a.textContent = item.icon + ' ' + item.label;
    nav.appendChild(a);
  });
}

function initSearch() {
  const input = document.getElementById('search-input');
  const dropdown = document.getElementById('search-dropdown');
  let activeIdx = -1;

  input.addEventListener('input', () => {
    const q = input.value.trim().toLowerCase();
    dropdown.innerHTML = '';
    activeIdx = -1;
    if (!q) { dropdown.classList.remove('open'); return; }

    const matches = ALL_ITEMS.filter(item =>
      item.label.toLowerCase().includes(q) || (item.icon && item.icon.includes(q))
    ).slice(0, 8);

    if (!matches.length) { dropdown.classList.remove('open'); return; }

    matches.forEach((item, i) => {
      const a = document.createElement('a');
      const url = item.url && item.url.endsWith('.md')
        ? 'markdown_renderer.html?file=' + encodeURIComponent(item.url)
        : (item.url || '#');
      a.href = url;
      a.innerHTML = `<span class="icon">${item.icon || 'üìÑ'}</span>${item.label}`;
      a.dataset.idx = i;
      dropdown.appendChild(a);
    });
    dropdown.classList.add('open');
  });

  input.addEventListener('keydown', e => {
    const links = dropdown.querySelectorAll('a');
    if (e.key === 'ArrowDown') { activeIdx = Math.min(activeIdx + 1, links.length - 1); }
    else if (e.key === 'ArrowUp') { activeIdx = Math.max(activeIdx - 1, 0); }
    else if (e.key === 'Enter' && activeIdx >= 0) { links[activeIdx].click(); return; }
    else if (e.key === 'Escape') { dropdown.classList.remove('open'); return; }
    links.forEach((l, i) => l.classList.toggle('active', i === activeIdx));
  });

  document.addEventListener('click', e => {
    if (!e.target.closest('.search-wrap')) dropdown.classList.remove('open');
  });
}

// Stage cards
function buildCards() {
  const grid = document.getElementById('stage-cards');
  STAGE_CARDS.forEach(s => {
    const a = document.createElement('a');
    a.className = 'card';
    a.href = s.url;
    a.innerHTML = `<div class="stage-num">${s.num} ¬∑ ${s.sub}</div><h3>${s.icon} ${s.title}</h3><p>${s.desc}</p>`;
    grid.appendChild(a);
  });
}

// Debug mode (cookie-based)
function initDebug() {
  const btn = document.getElementById('debug-toggle');
  const bar = document.getElementById('debug-bar');
  const isDebug = document.cookie.split(';').some(c => c.trim() === 'debug=true')
    || new URLSearchParams(location.search).get('debug') === 'true';

  if (isDebug) {
    bar.classList.add('visible');
    document.cookie = 'debug=true; path=/; max-age=86400';
  }

  btn.addEventListener('click', () => {
    const active = bar.classList.toggle('visible');
    document.cookie = `debug=${active}; path=/; max-age=86400`;
  });
}

buildCards();
initDebug();
loadMenus();
</script>
</body>
</html>
